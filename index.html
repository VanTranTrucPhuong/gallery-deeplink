<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EnTribe Demo</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }

      section {
        margin: 1rem;
        padding: 1rem;
        background-color: rgb(254, 235, 208);
        width: 90%;
      }
    </style>
  </head>

  <body>
    <section>
      <h2>Demo</h2>

      <!-- Correct iframe (MUST NOT be self-closing) -->
      <iframe
        id="myFrame"
        src="https://galleryqa.entribe.com/?cl=57&gid=252"
        frameborder="0"
        scrolling="no"
        width="100%"
        height="600px"
        title="Testing Gallery Hello"
      ></iframe>
    </section>

    <script type="text/javascript">
      // 2. Get iframe
      const iframe = document.getElementById("myFrame");
      window.addEventListener("message", (event) => {
        if (
          event.source === iframe.contentWindow &&
          event.data === "iframe-ready"
        ) {
          console.log("Iframe ready, sending query");
          // 1. Get parent query params, e.g. ?user=123&token=abc
          const parentQuery = window.location.search;
          const parentHref = window.location.href;
          iframe.contentWindow.postMessage(
            { parentQuery, parentHref },
            "https://galleryqa.entribe.com"
          );
        }
      });
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Script Tag Gallery Demo</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }

      section {
        margin: 1rem;
        padding: 1rem;
        background-color: rgb(254, 235, 208);
        width: 770px;
      }
    </style>
  </head>

  <body>
    <section>
      <h2>Slider Scenario 1 (width = 100%)</h2>

      <!-- Correct iframe (MUST NOT be self-closing) -->
      <iframe
        id="myFrame"
        src="http://localhost:3001/?cl=57&gid=224"
        frameborder="0"
        scrolling="no"
        width="100%"
        height="500px"
        title="Testing Gallery Hello"
      ></iframe>
    </section>

    <script type="text/javascript">
      console.log("Parent loaded");

      // 1. Get parent query params, e.g. ?user=123&token=abc
      const parentQuery = window.location.search;
      console.log("Parent query params:", parentQuery);

      // 2. Get iframe
      const iframe = document.getElementById("myFrame");

      // 3. Send query to iframe when it fully loads
      iframe.addEventListener("load", () => {
        console.log("Iframe loaded. Sending message...");

        iframe.contentWindow.postMessage(
          { query: parentQuery },
          "http://localhost:3001" // MUST match iframe origin exactly
        );
      });
    </script>
  </body>
</html>
